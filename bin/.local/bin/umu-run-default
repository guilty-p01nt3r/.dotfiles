#!/bin/bash

# Get -u "user" argument
user=""
while getopts "u:" opt; do
  case $opt in
    u)
      user=$OPTARG
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      ;;
  esac
done


# default exports
export PROTONPATH="~/.steam/compatibilitytools.d/proton-ge-custom"
export WINEPREFIX=~/Games/umu/defaultPrefix 
export GAMEID=0 

# Switch WINEPREFIX based on user ( case-insensitive )
# if equal to "luciano" => use lucianoPfx
# if equal to "lina" => use linaPfx
# if equal to "vincenzo" => use vincenzoPfx

case $user in
  luciano)
    export WINEPREFIX=~/Games/umu/lucianoPfx
    ;;
  lina)
    export WINEPREFIX=~/Games/umu/linaPfx
    ;;
  vincenzo)
    export WINEPREFIX=~/Games/umu/vincenzoPfx
    ;;
  *)
    export WINEPREFIX=~/Games/umu/defaultPrefix
    ;;
esac


#Get first argument (without -u)
shift $((OPTIND -1))
$preCmd umu-run "$1"

